(this["webpackJsonpchat-group-master"]=this["webpackJsonpchat-group-master"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(112),r=n.n(a),l=(n(126),n(127),n(3)),i="http://localhost:5050/api/",o="http://localhost:5050",u=n(7),d=n(10),j=n(11),b=n(8),m=n.n(b),h=s.a.createContext(null),x=n(283),f=n(1),O=function(e){var t=e.isAlreadyMember,n=Object(x.a)(),s=Object(l.a)(n,2)[1],a=Object(c.useContext)(h).setUser,r=Object(c.useState)(!1),o=Object(l.a)(r,2),b=o[0],O=o[1],p=Object(c.useState)({email:"",password:""}),g=Object(l.a)(p,2),v=g[0],w=g[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Login"}),Object(f.jsxs)("form",{className:"w-full",noValidate:!0,onSubmit:function(e){e.preventDefault(),m.a.post("".concat(i,"user/signin"),v).then((function(e){if(console.log(e),""===e.status)throw new Error;O(!1),a({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:null,isConnected:!0}),s(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){O(!0)}))},children:[Object(f.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(f.jsx)("label",{htmlFor:"emailLogin",className:"cursor-pointer",children:Object(f.jsx)(d.a,{className:"text-gray-600 text-2xl m-4",icon:j.b})}),Object(f.jsx)("input",{id:"emailLogin",type:"email",className:"authInput",placeholder:"Email",value:v.email,autoComplete:"on",onChange:function(e){return w(Object(u.a)(Object(u.a)({},v),{},{email:e.target.value}))}})]}),Object(f.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(f.jsx)("label",{htmlFor:"passwordLogin",className:"cursor-pointer",children:Object(f.jsx)(d.a,{className:"text-gray-600 text-2xl m-4 cursor-pointer",icon:j.c})}),Object(f.jsx)("input",{id:"passwordLogin",type:"password",className:"authInput",placeholder:"Password",value:v.password,onChange:function(e){return w(Object(u.a)(Object(u.a)({},v),{},{password:e.target.value}))}})]}),b&&Object(f.jsx)("p",{className:"text-red-400",children:"Email or password incorrect"}),Object(f.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Connexion"})]}),Object(f.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!1)},children:"Register"})]})},p=n(121),g=n(25),v=function(e){var t=e.isAlreadyMember,n=Object(p.a)({initialValues:{pseudo:"",email:"",password:"",confirmPassword:""},validationSchema:g.a({pseudo:g.c().required("Required"),email:g.c().required("Email address is required").email("Invalid email address"),password:g.c().required("Password is required"),confirmPassword:g.c().required("Please confirm your password").oneOf([g.b("password"),null],"Password must matched")}),onSubmit:function(e){!function(e){m.a.post("".concat(i,"user/signup"),e).then((function(e){console.log(e)})).catch((function(e){console.log("ERROR ---- "+e)}))}({pseudo:e.pseudo,email:e.email,password:e.password})}});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Sign Up"}),Object(f.jsxs)("form",{onSubmit:n.handleSubmit,className:"w-full",autoComplete:"off",children:[Object(f.jsxs)("div",{className:"mb-5",children:[Object(f.jsxs)("div",{className:"authInputWrapper",children:[Object(f.jsx)("label",{htmlFor:"pseudo",className:"cursor-pointer",children:Object(f.jsx)(d.a,{icon:j.e,className:"text-gray-600 text-2xl m-4"})}),Object(f.jsx)("input",Object(u.a)({id:"pseudo",type:"text",className:"authInput",placeholder:"Full Name"},n.getFieldProps("pseudo")))]}),n.touched.pseudo&&n.errors.pseudo&&Object(f.jsx)("p",{className:"text-red-400",children:n.errors.pseudo})]}),Object(f.jsxs)("div",{className:"mb-5",children:[Object(f.jsxs)("div",{className:"authInputWrapper",children:[Object(f.jsx)("label",{htmlFor:"Email",className:"cursor-pointer",children:Object(f.jsx)(d.a,{icon:j.b,className:"text-gray-600 text-2xl m-4"})}),Object(f.jsx)("input",Object(u.a)({id:"Email",type:"text",className:"authInput",placeholder:"Email"},n.getFieldProps("email")))]}),n.touched.email&&n.errors.email&&Object(f.jsx)("p",{className:"text-red-400",children:n.errors.email})]}),Object(f.jsxs)("div",{className:"mb-5",children:[Object(f.jsxs)("div",{className:"authInputWrapper",children:[Object(f.jsx)("label",{htmlFor:"Password",className:"cursor-pointer",children:Object(f.jsx)(d.a,{icon:j.c,className:"text-gray-600 text-2xl m-4"})}),Object(f.jsx)("input",Object(u.a)({id:"Password",type:"password",className:"authInput",placeholder:"Password"},n.getFieldProps("password")))]}),n.touched.password&&n.errors.password&&Object(f.jsx)("p",{className:"text-red-400",children:n.errors.password})]}),Object(f.jsxs)("div",{className:"mb-5",children:[Object(f.jsxs)("div",{className:"authInputWrapper",children:[Object(f.jsx)("label",{htmlFor:"ConfirmPassword",className:"cursor-pointer",children:Object(f.jsx)(d.a,{icon:j.c,className:"text-gray-600 text-2xl m-4"})}),Object(f.jsx)("input",Object(u.a)({id:"ConfirmPassword",type:"password",className:"authInput",placeholder:"Confirm password"},n.getFieldProps("confirmPassword")))]}),n.touched.confirmPassword&&n.errors.confirmPassword&&Object(f.jsx)("p",{className:"text-red-400",children:n.errors.confirmPassword})]}),Object(f.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Sign Up"})]}),Object(f.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!0)},children:"Connexion"})]})},w=function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,2),s=n[0],a=n[1];return Object(f.jsx)("div",{className:"p-8 rounded-xl flex flex-col items-center justify-center w-96 shadow-2xl border border-gray-700 bg-gray-800",children:s?Object(f.jsx)(O,{isAlreadyMember:a}):Object(f.jsx)(v,{isAlreadyMember:a})})},N=n(120),y=n(48),C=n(6),E=n(17),F=n.n(E),M=F()(o),I=function(e){var t=e.isOpen,n=e.setIsOpen,s=e.channels,a=e.addChannel,r=Object(c.useContext)(h).user,i=Object(c.useState)({userID:r.id,name:"",description:""}),o=Object(l.a)(i,2),d=o[0],j=o[1],b=Object(c.useRef)();Object(c.useMemo)((function(){M.on("createChannel",(function(e){var t=e.userID,n=e.channel;t===r.id&&a([].concat(Object(C.a)(s),[n]))}))}),[d,j]);return Object(c.useEffect)((function(){if(t){var e=function(e){!b.current.contains(e.target)&&t&&n(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}}),[t]),Object(f.jsx)("div",{className:"absolute h-full w-full flex justify-center items-center bg-black bg-opacity-50  transform transition duration-200 ".concat(t?"opacity-100 z-50":"scale-0 opacity-0"),children:Object(f.jsxs)("div",{ref:b,className:"w-1/2 bg-black-1100 rounded-2xl p-6 xl:w-1/3",children:[Object(f.jsx)("div",{className:"text-white font-semibold mb-7",children:"NEW CHANNEL"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"bg-InputCreateChannel rounded-md mb-5 p-2 w-full ctmFocus",type:"text",id:"",value:d.name,onChange:function(e){return j(Object(u.a)(Object(u.a)({},d),{},{name:e.target.value}))}}),Object(f.jsx)("textarea",{className:"bg-InputCreateChannel rounded-md mb-5 p-2  w-full h-24 resize-none ctmFocus leading-4",spellCheck:"false",value:d.description,onChange:function(e){return j(Object(u.a)(Object(u.a)({},d),{},{description:e.target.value}))}}),Object(f.jsx)("button",{className:"bg-blue-600 rounded-md py-1 px-6 text-white ctmFocus hover:bg-blue-700 float-right",onClick:function(){M.emit("createChannel",d)},children:"Save"})]})]})})},k=(n(279),F()(o)),_=function(e){e.channels;var t=e.setChannels,n=Object(c.useState)(!1),s=Object(l.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)([]),u=Object(l.a)(o,2),b=u[0],x=u[1],O=Object(c.useContext)(h).user,p=Object(c.useRef)(),g=Object(c.useRef)(),v=function(){m.a.get("".concat(i,"channel/search/").concat(O.id)).then((function(e){x(e.data)}))};Object(c.useEffect)((function(){return k.open(),k.on("joinChannel",(function(e){var n=e.joinedUser,c=e.joinedChannel;v(),r(!1),n._id===O.id&&t((function(e){return[].concat(Object(C.a)(e),[c])}))})),function(){return k.close()}}),[]);return Object(c.useEffect)((function(){var e=function(e){!p.current.contains(e.target)&&!g.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"px-4",children:Object(f.jsxs)("div",{className:"p-2 h-14 relative",ref:g,children:[Object(f.jsx)("label",{htmlFor:"search",className:"absolute text-white top-4 left-4 cursor-pointer",children:Object(f.jsx)(d.a,{icon:j.d})}),Object(f.jsx)("input",{id:"search",type:"search",autoComplete:"off",className:"focus:outline-none h-full w-full rounded-md p-1 pl-10 inputSearch leading-10 ctmFocus",placeholder:"Search",onFocus:function(){return r(!0),void v()}})]})}),Object(f.jsx)("div",{className:"relative w-full",children:Object(f.jsx)("div",{className:"absolute w-full px-4 overflow-hidden rounded-lg ".concat(a?"z-50":"z-index--1"),ref:p,children:Object(f.jsx)("ul",{className:"w-full bg-gray-500 rounded-lg transiton duration-200 ease-in-out opacity-0 overflow-hidden ".concat(a&&"opacity-100"),children:function(){var e=[];return b.map((function(t,n){e.push(Object(f.jsx)("li",{className:"w-full flex items-center ".concat(n!==b.length-1&&"border-b"," bg-gray-600 bg-opacity-70 transition duration-200 hover:bg-opacity-100"),children:Object(f.jsxs)("button",{className:"flex p-3 w-full ctmFocus items-center",onClick:function(){return function(e){var t={userID:O.id,channelID:e};k.emit("joinChannel",t)}(t._id)},children:[Object(f.jsx)("div",{className:"h-7 w-7 bg-red-400 rounded-md mr-4 flex items-center justify-center",children:t.name[0]}),Object(f.jsx)("span",{children:t.name})]})},t._id))})),e}()})})})]})},S=function(e){return Object(f.jsxs)("div",{className:"shadow-lg h-16 flex-shrink-0 text-gray-100 font-bold text-lg px-6 flex items-center ".concat(e.className),children:[Object(f.jsx)("span",{children:e.title}),e.children]})},P=(n(280),F()(o)),D=function(e){var t=e.selectChannel,n=Object(c.useState)(!1),s=Object(l.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)([]),x=Object(l.a)(b,2),O=x[0],p=x[1],g=Object(c.useContext)(h).user;Object(c.useEffect)((function(){j(!0),m.a.get("".concat(i,"channel/").concat(g.id)).then((function(e){p(e.data),j(!1)})).finally((function(){j(!1)}))}),[]),Object(c.useEffect)((function(){P.on("banMember",(function(e){var t=e.bannedMember,n=e.channelID;t._id===g.id&&p((function(e){return e.filter((function(e){return e._id!==n}))}))}))}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(I,{isOpen:a,setIsOpen:r,channels:O,addChannel:p}),Object(f.jsx)(S,{title:"Channel",className:"justify-between",children:Object(f.jsx)("button",{onClick:function(){return r(!0)},className:"channelIcon p-1 rounded-md ctmFocus hoverMenuProfileBg",children:Object(f.jsx)(y.a,{className:"text-white"})})}),Object(f.jsx)(_,{channels:O,setChannels:p}),Object(f.jsx)("div",{className:"p-4 overflow-y-scroll scrollbar h-full",children:d?function(){for(var e=[],t=0;t<7;t++)e.push(Object(f.jsxs)("div",{className:"flex items-center mb-4 cursor-pointer w-full p-2 rounded-lg animate-pulse",children:[Object(f.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-400 mr-3"}),Object(f.jsx)("div",{className:"w-44 h-8 rounded-md bg-gray-400"})]},t));return e}():O.map((function(e,n){return Object(f.jsxs)("button",{onClick:function(){return t(e)},className:"flex items-center ".concat(n!==O.length-1&&"mb-4"," cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg"),children:[Object(f.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white uppercase",children:e.name[0]}),Object(f.jsx)("span",{className:"text-gray-300 uppercase",children:e.name})]},e._id)}))})]})},R=n(118),L=n(119),B=n(50),A=n(49),q=F()(o),W=function(e){var t=e.currentChannel,n=e.selectChannel,s=Object(c.useState)([]),a=Object(l.a)(s,2),r=a[0],o=a[1],u=Object(c.useContext)(h).user;return Object(c.useEffect)((function(){q.on("joinChannel",(function(e){var t=e.joinedUser;e.joinedChannel;o((function(e){return[].concat(Object(C.a)(e),[t])}))})),q.on("banMember",(function(e){var c=e.bannedMember,s=e.channelID;c._id===u.id&&s===t._id&&n(""),s===t._id&&o((function(e){return e.filter((function(e){return e._id!==c._id}))}))}))}),[]),Object(c.useEffect)((function(){return m.a.get("".concat(i,"channel/user/").concat(t._id)).then((function(e){o(e.data)})),function(){return o([])}}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(S,{classNasme:"justify-start flex-shrink-0",children:[Object(f.jsx)("button",{className:"text-2xl ctmFocus mr-3",onClick:function(){return n("")},children:Object(f.jsx)(R.a,{})}),Object(f.jsx)("span",{children:"All channels"})]}),Object(f.jsxs)("div",{className:"px-6 py-4",children:[Object(f.jsx)("h3",{className:"uppercase text-gray-300 font-bold mb-2",children:t.name}),Object(f.jsx)("p",{className:"text-gray-300",children:t.description?t.description:"no description"})]}),Object(f.jsx)("h3",{className:"uppercase text-gray-300 font-bold px-6 py-4",children:"Members"}),Object(f.jsx)("ul",{className:"overflow-y-scroll scrollbar h-full px-4",children:r.map((function(e,n){return Object(f.jsxs)("li",{className:"mb-4 flex justify-between",children:[Object(f.jsxs)("div",{className:"flex items-center p-2",children:[Object(f.jsx)("img",{className:"w-9 h-9 bg-white mr-5 rounded",src:e.picture,alt:"C"}),Object(f.jsx)("span",{className:"text-lg ".concat(u.id===e._id?"text-gray-300":"text-gray-400"," font-bold"),children:e.pseudo}),e._id===t.owner&&Object(f.jsx)(B.c,{className:"ml-2 text-yellow-500"})]}),Object(f.jsxs)("div",{className:"flex items-center text-white",children:[Object(f.jsx)("button",{className:"ctmFocus p-1",children:Object(f.jsx)(B.b,{})}),u.id===t.owner&&e._id!==u.id&&Object(f.jsx)("button",{className:"ml-4 ctmFocus p-1",onClick:function(){return function(e){var n={bannedMemberID:e,channelID:t._id};q.emit("banMember",n)}(e._id)},children:Object(f.jsx)(A.a,{})})]})]},n)}))}),Object(f.jsxs)("div",{className:"w-full h-16 flex ",children:[Object(f.jsxs)("button",{className:"w-full bg-gray-800 ctmFocus text-white flex items-center justify-center transiton duration-200 hover:bg-gray-900",children:[Object(f.jsx)(B.a,{className:"mr-3"}),"EDIT"]}),Object(f.jsxs)("button",{className:"w-full bg-gray-800 ctmFocus flex items-center justify-center text-red-400 transiton duration-200 hover:bg-gray-900",onClick:function(){return function(){var e={userID:u.id,channelID:t._id};m.a.post("".concat(i,"user/channel/leave"),e).then((function(){})),n("")}()},children:[Object(f.jsx)(L.a,{className:"mr-3"}),"LEAVE"]})]})]})},U=function(e){var t=e.selectChannel,n=e.currentChannel;return Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)(W,{currentChannel:n,selectChannel:t}):Object(f.jsx)(D,{selectChannel:t})})},z=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"border-b-2 h-16 border-gray-900 text-gray-100 font-bold text-lg px-6 flex items-center justify-between",children:Object(f.jsx)("h1",{className:"text-center text-white",children:"Message"})}),Object(f.jsx)("div",{className:"p-4",children:Object(f.jsxs)("button",{className:"flex items-center mb-4 cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg",children:[Object(f.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white"}),Object(f.jsx)("span",{className:"text-gray-300",children:"Message"})]})})]})},T=function(e){var t=e.currentMode,n=e.setMode,s=e.selectChannel,a=e.currentChannel,r=Object(c.useContext)(h).user,i=Object(c.useState)(!1),o=Object(l.a)(i,2),u=o[0],b=o[1],m=Object(c.useRef)(),O=Object(x.a)(),p=Object(l.a)(O,3)[2];return Object(c.useEffect)((function(){var e=u,t=function(t){!m.current.contains(t.target)&&e&&b(!1)};return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[u]),Object(f.jsxs)("div",{className:"w-72 bg-black-900 flex flex-col justify-between flex-shrink-0",children:[Object(f.jsx)(f.Fragment,{children:"channel"===t?Object(f.jsx)(U,{currentChannel:a,selectChannel:s}):Object(f.jsx)(z,{})}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"h-14 bg-gray-700 flex",children:[Object(f.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("channel")},children:"CHANNEL"}),Object(f.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("message")},children:"MESSAGE"})]}),Object(f.jsxs)("a",{href:"#",className:"h-20 bg-black-1100 p-6 flex items-center justify-between w-full ctmFocus ring-inset relative",onClick:function(e){e.preventDefault(),b(!0)},children:[Object(f.jsx)("div",{ref:m,className:"w-48 h-44 bg-black-700 absolute -top-36 right-4 rounded-xl p-3 transition duration-200 opacity-0 transform ".concat(u?"scale-100 opacity-100":"scale-0 opacity-0"),children:Object(f.jsxs)("ul",{className:"flex flex-col justify-evenly h-full text-left text-white",children:[Object(f.jsx)("li",{children:Object(f.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(f.jsx)(d.a,{className:"text-xl mr-3",icon:j.f}),"My Profile"]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(f.jsx)(N.a,{className:"text-xl mr-3"}),"Tweeter"]})}),Object(f.jsx)("li",{className:"h-1 border-b border-gray-100 my-2 opacity-30"}),Object(f.jsx)("li",{children:Object(f.jsxs)("button",{className:"flex w-full text-red-500 transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",onClick:function(){p(["REMEMBER_ME"]),window.location.reload()},children:[Object(f.jsx)(y.b,{className:"text-xl mr-3"}),"Logout"]})})]})}),Object(f.jsxs)("div",{className:"flex items-center",children:[Object(f.jsx)("img",{className:"h-10 w-10 mr-5",src:r.image,alt:"profile"}),Object(f.jsx)("span",{className:"text-gray-300 text-xl",children:r.pseudo})]}),Object(f.jsx)(d.a,{className:"text-gray-300",icon:j.a})]})]})]})},V=(n(281),function(e){var t=e.user,n=e.message,c=e.date,s=e.hour;return Object(f.jsxs)("li",{className:"flex mb-4 w-full",children:[Object(f.jsx)("img",{className:"h-10 w-10 bg-white rounded-md mr-5 mt-1 flex-none",src:t.picture,alt:"C"}),Object(f.jsxs)("div",{className:"w-full",children:[Object(f.jsxs)("div",{className:"flex items-baseline",children:[Object(f.jsx)("h2",{className:"mr-3 font-bold text-lg colorName",children:t.pseudo}),Object(f.jsx)("span",{className:"text-gray-300 text-xs colorName",children:function(){for(var e=c.split("/"),t=(new Date).toLocaleDateString().split("/"),n=0;n<=2;n++)e[n]=parseInt(e[n]),t[n]=parseInt(t[n]);if(e[1]==t[1]&&e[2]==t[2]){if(e[0]===t[0])return"today at ";if(e[0]===t[0]-1)return"yesterday at "}return c}()+" "+s})]}),Object(f.jsx)("div",{className:"text-gray-300 w-full",children:n})]})]})}),H=F()(o),J=function(e){var t=e.currentChannel,n=Object(c.useContext)(h).user,s=Object(c.useState)([]),a=Object(l.a)(s,2),r=a[0],o=a[1],d=Object(c.useRef)();Object(c.useEffect)((function(){H.on("sendMessage",(function(e){-1===r.findIndex((function(t){return t._id!==e._id}))&&o((function(t){return[].concat(Object(C.a)(t),[e])}))}))}),[]),Object(c.useEffect)((function(){m.a.get("".concat(i,"channel/message/").concat(t._id)).then((function(e){o(e.data)}))}),[]);var j=function(){var e=d.current.innerText;if(e){var c={userID:n.id,channelID:t._id,message:e};d.current.innerText="",H.emit("sendMessage",c)}};return Object(f.jsxs)("div",{className:"flex flex-col h-full w-full justify-between",children:[Object(f.jsx)("div",{className:"h-16 shadow-lg text-gray-100 font-bold text-lg px-11 flex items-center uppercase flex-shrink-0",children:Object(f.jsx)("h1",{children:t.name?t.name:"Select channel"})}),t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"overflow-y-scroll h-full scrollbar flex flex-col-reverse",children:Object(f.jsx)("ul",{className:"px-11 pt-6 break-all mt-auto",children:r&&r.filter((function(e){return e.channelID===t._id})).map((function(e){return Object(f.jsx)(V,Object(u.a)({},e),e._id)}))})}),Object(f.jsxs)("div",{className:"min-h-10 max-w-full mx-11 flex relative rounded-md overflow-hidden my-7 flex-shrink-0",children:[Object(f.jsx)("div",{contentEditable:"true",ref:d,onKeyDown:function(e){return function(e){13===e.keyCode&&(e.preventDefault(),j())}(e)},className:"h-full w-full inputSearch ctmFocus p-2 pr-10 break-all text-gray-300"}),Object(f.jsx)("button",{onClick:function(){j()},className:"absolute right-1 inset-y-1 ctmFocus m-auto bg-blue-500  text-white h-8 w-8 flex items-center justify-center rounded-md cursor-pointer",children:Object(f.jsx)(A.b,{})})]})]}):Object(f.jsxs)("div",{className:"flex items-center justify-center flex-col h-full",children:[Object(f.jsx)("h3",{className:"text-4xl",children:"Welcome !"}),Object(f.jsx)("p",{children:"Please select channel"})]})]})},G=function(e){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Message"})})},K=function(e){var t=Object(c.useState)("channel"),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],u=i[1];return Object(f.jsxs)("div",{className:"w-full h-full bg-black-700 rounded-lg shadow-2xl flex overflow-hidden relative",children:[Object(f.jsx)(T,{currentMode:s,setMode:a,currentChannel:o,selectChannel:u}),function(){switch(s){case"channel":return Object(f.jsx)(J,{currentChannel:o});case"message":return Object(f.jsx)(G,{});default:return Object(f.jsx)(J,{currentChannel:o})}}()]})},Q={id:null,pseudo:null,email:null,description:null,picture:null,role:null,isConnected:!1},X=function(e){var t=Object(c.useState)(Q),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(x.a)(),o=Object(l.a)(r,3),u=o[1],d=o[2];return Object(c.useEffect)((function(){m.a.get("".concat(i,"user/rememberme"),{withCredentials:!0}).then((function(e){if(""===e.data)throw new Error;a({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:null,isConnected:!0}),u(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){a(Q),d(["REMEMBER_ME"])}))}),[]),Object(f.jsx)("div",{className:"h-screen flex justify-center items-center bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-10",children:Object(f.jsx)(h.Provider,{value:{user:s,setUser:a},children:s.isConnected?Object(f.jsx)(K,{}):Object(f.jsx)(w,{})})})};r.a.render(Object(f.jsx)(X,{}),document.querySelector("#root"))}},[[282,1,2]]]);
//# sourceMappingURL=main.a9ec5c7e.chunk.js.map