(this["webpackJsonpchat-group-master"]=this["webpackJsonpchat-group-master"]||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(112),r=n.n(a),l=(n(126),n(127),n(3)),i="",o=n(7),u=n(10),d=n(11),j=n(8),b=n.n(j),m=s.a.createContext(null),h=n(283),x=n(1),f=function(e){var t=e.isAlreadyMember,n=Object(h.a)(),s=Object(l.a)(n,2)[1],a=Object(c.useContext)(m).setUser,r=Object(c.useState)(!1),j=Object(l.a)(r,2),f=j[0],O=j[1],p=Object(c.useState)({email:"",password:""}),g=Object(l.a)(p,2),v=g[0],w=g[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Login"}),Object(x.jsxs)("form",{className:"w-full",noValidate:!0,onSubmit:function(e){e.preventDefault(),b.a.post("".concat(i,"user/signin"),v).then((function(e){if(""===e.status)throw new Error;O(!1),a({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:null,isConnected:!0}),s(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){O(!0)}))},children:[Object(x.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(x.jsx)("label",{htmlFor:"emailLogin",className:"cursor-pointer",children:Object(x.jsx)(u.a,{className:"text-gray-600 text-2xl m-4",icon:d.b})}),Object(x.jsx)("input",{id:"emailLogin",type:"email",className:"authInput",placeholder:"Email",value:v.email,autoComplete:"on",onChange:function(e){return w(Object(o.a)(Object(o.a)({},v),{},{email:e.target.value}))}})]}),Object(x.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(x.jsx)("label",{htmlFor:"passwordLogin",className:"cursor-pointer",children:Object(x.jsx)(u.a,{className:"text-gray-600 text-2xl m-4 cursor-pointer",icon:d.c})}),Object(x.jsx)("input",{id:"passwordLogin",type:"password",className:"authInput",placeholder:"Password",value:v.password,onChange:function(e){return w(Object(o.a)(Object(o.a)({},v),{},{password:e.target.value}))}})]}),f&&Object(x.jsx)("p",{className:"text-red-400",children:"Email or password incorrect"}),Object(x.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Connexion"})]}),Object(x.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!1)},children:"Register"})]})},O=n(121),p=n(25),g=function(e){var t=e.isAlreadyMember,n=Object(O.a)({initialValues:{pseudo:"",email:"",password:"",confirmPassword:""},validationSchema:p.a({pseudo:p.c().required("Required"),email:p.c().required("Email address is required").email("Invalid email address"),password:p.c().required("Password is required"),confirmPassword:p.c().required("Please confirm your password").oneOf([p.b("password"),null],"Password must matched")}),onSubmit:function(e){!function(e){b.a.post("".concat(i,"user/signup"),e).then((function(e){console.log(e)})).catch((function(e){console.log("ERROR ---- "+e)}))}({pseudo:e.pseudo,email:e.email,password:e.password})}});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Sign Up"}),Object(x.jsxs)("form",{onSubmit:n.handleSubmit,className:"w-full",autoComplete:"off",children:[Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"pseudo",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.e,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"pseudo",type:"text",className:"authInput",placeholder:"Full Name"},n.getFieldProps("pseudo")))]}),n.touched.pseudo&&n.errors.pseudo&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.pseudo})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"Email",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.b,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"Email",type:"text",className:"authInput",placeholder:"Email"},n.getFieldProps("email")))]}),n.touched.email&&n.errors.email&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.email})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"Password",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.c,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"Password",type:"password",className:"authInput",placeholder:"Password"},n.getFieldProps("password")))]}),n.touched.password&&n.errors.password&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.password})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"ConfirmPassword",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.c,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"ConfirmPassword",type:"password",className:"authInput",placeholder:"Confirm password"},n.getFieldProps("confirmPassword")))]}),n.touched.confirmPassword&&n.errors.confirmPassword&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.confirmPassword})]}),Object(x.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Sign Up"})]}),Object(x.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!0)},children:"Connexion"})]})},v=function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,2),s=n[0],a=n[1];return Object(x.jsx)("div",{className:"p-8 rounded-xl flex flex-col items-center justify-center w-96 shadow-2xl border border-gray-700 bg-gray-800",children:s?Object(x.jsx)(f,{isAlreadyMember:a}):Object(x.jsx)(g,{isAlreadyMember:a})})},w=n(120),N=n(48),y=n(6),C=n(17),E=n.n(C),F=E()(""),M=function(e){var t=e.isOpen,n=e.setIsOpen,s=e.channels,a=e.addChannel,r=Object(c.useContext)(m).user,i=Object(c.useState)({userID:r.id,name:"",description:""}),u=Object(l.a)(i,2),d=u[0],j=u[1],b=Object(c.useRef)();Object(c.useMemo)((function(){F.on("createChannel",(function(e){var t=e.userID,n=e.channel;t===r.id&&a([].concat(Object(y.a)(s),[n]))}))}),[d,j]);return Object(c.useEffect)((function(){if(t){var e=function(e){!b.current.contains(e.target)&&t&&n(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}}),[t]),Object(x.jsx)("div",{className:"absolute h-full w-full flex justify-center items-center bg-black bg-opacity-50  transform transition duration-200 ".concat(t?"opacity-100 z-50":"scale-0 opacity-0"),children:Object(x.jsxs)("div",{ref:b,className:"w-1/2 bg-black-1100 rounded-2xl p-6 xl:w-1/3",children:[Object(x.jsx)("div",{className:"text-white font-semibold mb-7",children:"NEW CHANNEL"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{className:"bg-InputCreateChannel rounded-md mb-5 p-2 w-full ctmFocus",type:"text",id:"",value:d.name,onChange:function(e){return j(Object(o.a)(Object(o.a)({},d),{},{name:e.target.value}))}}),Object(x.jsx)("textarea",{className:"bg-InputCreateChannel rounded-md mb-5 p-2  w-full h-24 resize-none ctmFocus leading-4",spellCheck:"false",value:d.description,onChange:function(e){return j(Object(o.a)(Object(o.a)({},d),{},{description:e.target.value}))}}),Object(x.jsx)("button",{className:"bg-blue-600 rounded-md py-1 px-6 text-white ctmFocus hover:bg-blue-700 float-right",onClick:function(){F.emit("createChannel",d)},children:"Save"})]})]})})},I=(n(279),E()("")),k=function(e){e.channels;var t=e.setChannels,n=Object(c.useState)(!1),s=Object(l.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)([]),j=Object(l.a)(o,2),h=j[0],f=j[1],O=Object(c.useContext)(m).user,p=Object(c.useRef)(),g=Object(c.useRef)(),v=function(){b.a.get("".concat(i,"channel/search/").concat(O.id)).then((function(e){f(e.data)}))};Object(c.useEffect)((function(){return I.open(),I.on("joinChannel",(function(e){var n=e.joinedUser,c=e.joinedChannel;v(),r(!1),n._id===O.id&&t((function(e){return[].concat(Object(y.a)(e),[c])}))})),function(){return I.close()}}),[]);return Object(c.useEffect)((function(){var e=function(e){!p.current.contains(e.target)&&!g.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"px-4",children:Object(x.jsxs)("div",{className:"p-2 h-14 relative",ref:g,children:[Object(x.jsx)("label",{htmlFor:"search",className:"absolute text-white top-4 left-4 cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.d})}),Object(x.jsx)("input",{id:"search",type:"search",autoComplete:"off",className:"focus:outline-none h-full w-full rounded-md p-1 pl-10 inputSearch leading-10 ctmFocus",placeholder:"Search",onFocus:function(){return r(!0),void v()}})]})}),Object(x.jsx)("div",{className:"relative w-full",children:Object(x.jsx)("div",{className:"absolute w-full px-4 overflow-hidden rounded-lg ".concat(a?"z-50":"z-index--1"),ref:p,children:Object(x.jsx)("ul",{className:"w-full bg-gray-500 rounded-lg transiton duration-200 ease-in-out opacity-0 overflow-hidden ".concat(a&&"opacity-100"),children:function(){var e=[];return h.map((function(t,n){e.push(Object(x.jsx)("li",{className:"w-full flex items-center ".concat(n!==h.length-1&&"border-b"," bg-gray-600 bg-opacity-70 transition duration-200 hover:bg-opacity-100"),children:Object(x.jsxs)("button",{className:"flex p-3 w-full ctmFocus items-center",onClick:function(){return function(e){var t={userID:O.id,channelID:e};I.emit("joinChannel",t)}(t._id)},children:[Object(x.jsx)("div",{className:"h-7 w-7 bg-red-400 rounded-md mr-4 flex items-center justify-center",children:t.name[0]}),Object(x.jsx)("span",{children:t.name})]})},t._id))})),e}()})})})]})},_=function(e){return Object(x.jsxs)("div",{className:"shadow-lg h-16 flex-shrink-0 text-gray-100 font-bold text-lg px-6 flex items-center ".concat(e.className),children:[Object(x.jsx)("span",{children:e.title}),e.children]})},S=(n(280),E()("")),P=function(e){var t=e.selectChannel,n=Object(c.useState)(!1),s=Object(l.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],h=Object(c.useState)([]),f=Object(l.a)(h,2),O=f[0],p=f[1],g=Object(c.useContext)(m).user;Object(c.useEffect)((function(){j(!0),b.a.get("".concat(i,"channel/").concat(g.id)).then((function(e){p(e.data),j(!1)})).finally((function(){j(!1)}))}),[]),Object(c.useEffect)((function(){S.on("banMember",(function(e){var t=e.bannedMember,n=e.channelID;t._id===g.id&&p((function(e){return e.filter((function(e){return e._id!==n}))}))}))}));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(M,{isOpen:a,setIsOpen:r,channels:O,addChannel:p}),Object(x.jsx)(_,{title:"Channel",className:"justify-between",children:Object(x.jsx)("button",{onClick:function(){return r(!0)},className:"channelIcon p-1 rounded-md ctmFocus hoverMenuProfileBg",children:Object(x.jsx)(N.a,{className:"text-white"})})}),Object(x.jsx)(k,{channels:O,setChannels:p}),Object(x.jsx)("div",{className:"p-4 overflow-y-scroll scrollbar h-full",children:d?function(){for(var e=[],t=0;t<7;t++)e.push(Object(x.jsxs)("div",{className:"flex items-center mb-4 cursor-pointer w-full p-2 rounded-lg animate-pulse",children:[Object(x.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-400 mr-3"}),Object(x.jsx)("div",{className:"w-44 h-8 rounded-md bg-gray-400"})]},t));return e}():O.map((function(e,n){return Object(x.jsxs)("button",{onClick:function(){return t(e)},className:"flex items-center ".concat(n!==O.length-1&&"mb-4"," cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg"),children:[Object(x.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white uppercase",children:e.name[0]}),Object(x.jsx)("span",{className:"text-gray-300 uppercase",children:e.name})]},e._id)}))})]})},D=n(118),R=n(119),L=n(50),B=n(49),A=E()(""),q=function(e){var t=e.currentChannel,n=e.selectChannel,s=Object(c.useState)([]),a=Object(l.a)(s,2),r=a[0],o=a[1],u=Object(c.useContext)(m).user;return Object(c.useEffect)((function(){A.on("joinChannel",(function(e){var t=e.joinedUser;e.joinedChannel;o((function(e){return[].concat(Object(y.a)(e),[t])}))})),A.on("banMember",(function(e){var c=e.bannedMember,s=e.channelID;c._id===u.id&&s===t._id&&n(""),s===t._id&&o((function(e){return e.filter((function(e){return e._id!==c._id}))}))}))}),[]),Object(c.useEffect)((function(){return b.a.get("".concat(i,"channel/user/").concat(t._id)).then((function(e){o(e.data)})),function(){return o([])}}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(_,{classNasme:"justify-start flex-shrink-0",children:[Object(x.jsx)("button",{className:"text-2xl ctmFocus mr-3",onClick:function(){return n("")},children:Object(x.jsx)(D.a,{})}),Object(x.jsx)("span",{children:"All channels"})]}),Object(x.jsxs)("div",{className:"px-6 py-4",children:[Object(x.jsx)("h3",{className:"uppercase text-gray-300 font-bold mb-2",children:t.name}),Object(x.jsx)("p",{className:"text-gray-300",children:t.description?t.description:"no description"})]}),Object(x.jsx)("h3",{className:"uppercase text-gray-300 font-bold px-6 py-4",children:"Members"}),Object(x.jsx)("ul",{className:"overflow-y-scroll scrollbar h-full px-4",children:r.map((function(e,n){return Object(x.jsxs)("li",{className:"mb-4 flex justify-between",children:[Object(x.jsxs)("div",{className:"flex items-center p-2",children:[Object(x.jsx)("img",{className:"w-9 h-9 bg-white mr-5 rounded",src:e.picture,alt:"C"}),Object(x.jsx)("span",{className:"text-lg ".concat(u.id===e._id?"text-gray-300":"text-gray-400"," font-bold"),children:e.pseudo}),e._id===t.owner&&Object(x.jsx)(L.c,{className:"ml-2 text-yellow-500"})]}),Object(x.jsxs)("div",{className:"flex items-center text-white",children:[Object(x.jsx)("button",{className:"ctmFocus p-1",children:Object(x.jsx)(L.b,{})}),u.id===t.owner&&e._id!==u.id&&Object(x.jsx)("button",{className:"ml-4 ctmFocus p-1",onClick:function(){return function(e){var n={bannedMemberID:e,channelID:t._id};A.emit("banMember",n)}(e._id)},children:Object(x.jsx)(B.a,{})})]})]},n)}))}),Object(x.jsxs)("div",{className:"w-full h-16 flex ",children:[Object(x.jsxs)("button",{className:"w-full bg-gray-800 ctmFocus text-white flex items-center justify-center transiton duration-200 hover:bg-gray-900",children:[Object(x.jsx)(L.a,{className:"mr-3"}),"EDIT"]}),Object(x.jsxs)("button",{className:"w-full bg-gray-800 ctmFocus flex items-center justify-center text-red-400 transiton duration-200 hover:bg-gray-900",onClick:function(){return function(){var e={userID:u.id,channelID:t._id};b.a.post("".concat(i,"user/channel/leave"),e).then((function(){})),n("")}()},children:[Object(x.jsx)(R.a,{className:"mr-3"}),"LEAVE"]})]})]})},W=function(e){var t=e.selectChannel,n=e.currentChannel;return Object(x.jsx)(x.Fragment,{children:n?Object(x.jsx)(q,{currentChannel:n,selectChannel:t}):Object(x.jsx)(P,{selectChannel:t})})},U=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"border-b-2 h-16 border-gray-900 text-gray-100 font-bold text-lg px-6 flex items-center justify-between",children:Object(x.jsx)("h1",{className:"text-center text-white",children:"Message"})}),Object(x.jsx)("div",{className:"p-4",children:Object(x.jsxs)("button",{className:"flex items-center mb-4 cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg",children:[Object(x.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white"}),Object(x.jsx)("span",{className:"text-gray-300",children:"Message"})]})})]})},z=function(e){var t=e.currentMode,n=e.setMode,s=e.selectChannel,a=e.currentChannel,r=Object(c.useContext)(m).user,i=Object(c.useState)(!1),o=Object(l.a)(i,2),j=o[0],b=o[1],f=Object(c.useRef)(),O=Object(h.a)(),p=Object(l.a)(O,3)[2];return Object(c.useEffect)((function(){var e=j,t=function(t){!f.current.contains(t.target)&&e&&b(!1)};return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[j]),Object(x.jsxs)("div",{className:"w-72 bg-black-900 flex flex-col justify-between flex-shrink-0",children:[Object(x.jsx)(x.Fragment,{children:"channel"===t?Object(x.jsx)(W,{currentChannel:a,selectChannel:s}):Object(x.jsx)(U,{})}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"h-14 bg-gray-700 flex",children:[Object(x.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("channel")},children:"CHANNEL"}),Object(x.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("message")},children:"MESSAGE"})]}),Object(x.jsxs)("a",{href:"#",className:"h-20 bg-black-1100 p-6 flex items-center justify-between w-full ctmFocus ring-inset relative",onClick:function(e){e.preventDefault(),b(!0)},children:[Object(x.jsx)("div",{ref:f,className:"w-48 h-44 bg-black-700 absolute -top-36 right-4 rounded-xl p-3 transition duration-200 opacity-0 transform ".concat(j?"scale-100 opacity-100":"scale-0 opacity-0"),children:Object(x.jsxs)("ul",{className:"flex flex-col justify-evenly h-full text-left text-white",children:[Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(x.jsx)(u.a,{className:"text-xl mr-3",icon:d.f}),"My Profile"]})}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(x.jsx)(w.a,{className:"text-xl mr-3"}),"Tweeter"]})}),Object(x.jsx)("li",{className:"h-1 border-b border-gray-100 my-2 opacity-30"}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full text-red-500 transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",onClick:function(){p(["REMEMBER_ME"]),window.location.reload()},children:[Object(x.jsx)(N.b,{className:"text-xl mr-3"}),"Logout"]})})]})}),Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)("img",{className:"h-10 w-10 mr-5",src:r.image,alt:"profile"}),Object(x.jsx)("span",{className:"text-gray-300 text-xl",children:r.pseudo})]}),Object(x.jsx)(u.a,{className:"text-gray-300",icon:d.a})]})]})]})},T=(n(281),function(e){var t=e.user,n=e.message,c=e.date,s=e.hour;return Object(x.jsxs)("li",{className:"flex mb-4 w-full",children:[Object(x.jsx)("img",{className:"h-10 w-10 bg-white rounded-md mr-5 mt-1 flex-none",src:t.picture,alt:"C"}),Object(x.jsxs)("div",{className:"w-full",children:[Object(x.jsxs)("div",{className:"flex items-baseline",children:[Object(x.jsx)("h2",{className:"mr-3 font-bold text-lg colorName",children:t.pseudo}),Object(x.jsx)("span",{className:"text-gray-300 text-xs colorName",children:function(){for(var e=c.split("/"),t=(new Date).toLocaleDateString().split("/"),n=0;n<=2;n++)e[n]=parseInt(e[n]),t[n]=parseInt(t[n]);if(e[1]==t[1]&&e[2]==t[2]){if(e[0]===t[0])return"today at ";if(e[0]===t[0]-1)return"yesterday at "}return c}()+" "+s})]}),Object(x.jsx)("div",{className:"text-gray-300 w-full",children:n})]})]})}),V=E()(""),H=function(e){var t=e.currentChannel,n=Object(c.useContext)(m).user,s=Object(c.useState)([]),a=Object(l.a)(s,2),r=a[0],u=a[1],d=Object(c.useRef)();Object(c.useEffect)((function(){V.on("sendMessage",(function(e){-1===r.findIndex((function(t){return t._id!==e._id}))&&u((function(t){return[].concat(Object(y.a)(t),[e])}))}))}),[]),Object(c.useEffect)((function(){b.a.get("".concat(i,"channel/message/").concat(t._id)).then((function(e){u(e.data)}))}),[]);var j=function(){var e=d.current.innerText;if(e){var c={userID:n.id,channelID:t._id,message:e};d.current.innerText="",V.emit("sendMessage",c)}};return Object(x.jsxs)("div",{className:"flex flex-col h-full w-full justify-between",children:[Object(x.jsx)("div",{className:"h-16 shadow-lg text-gray-100 font-bold text-lg px-11 flex items-center uppercase flex-shrink-0",children:Object(x.jsx)("h1",{children:t.name?t.name:"Select channel"})}),t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"overflow-y-scroll h-full scrollbar flex flex-col-reverse",children:Object(x.jsx)("ul",{className:"px-11 pt-6 break-all mt-auto",children:r&&r.filter((function(e){return e.channelID===t._id})).map((function(e){return Object(x.jsx)(T,Object(o.a)({},e),e._id)}))})}),Object(x.jsxs)("div",{className:"min-h-10 max-w-full mx-11 flex relative rounded-md overflow-hidden my-7 flex-shrink-0",children:[Object(x.jsx)("div",{contentEditable:"true",ref:d,onKeyDown:function(e){return function(e){13===e.keyCode&&(e.preventDefault(),j())}(e)},className:"h-full w-full inputSearch ctmFocus p-2 pr-10 break-all text-gray-300"}),Object(x.jsx)("button",{onClick:function(){j()},className:"absolute right-1 inset-y-1 ctmFocus m-auto bg-blue-500  text-white h-8 w-8 flex items-center justify-center rounded-md cursor-pointer",children:Object(x.jsx)(B.b,{})})]})]}):Object(x.jsxs)("div",{className:"flex items-center justify-center flex-col h-full",children:[Object(x.jsx)("h3",{className:"text-4xl",children:"Welcome !"}),Object(x.jsx)("p",{children:"Please select channel"})]})]})},J=function(e){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Message"})})},G=function(e){var t=Object(c.useState)("channel"),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],u=i[1];return Object(x.jsxs)("div",{className:"w-full h-full bg-black-700 rounded-lg shadow-2xl flex overflow-hidden relative",children:[Object(x.jsx)(z,{currentMode:s,setMode:a,currentChannel:o,selectChannel:u}),function(){switch(s){case"channel":return Object(x.jsx)(H,{currentChannel:o});case"message":return Object(x.jsx)(J,{});default:return Object(x.jsx)(H,{currentChannel:o})}}()]})},K={id:null,pseudo:null,email:null,description:null,picture:null,role:null,isConnected:!1},Q=function(e){var t=Object(c.useState)(K),n=Object(l.a)(t,2),s=n[0],a=n[1],r=Object(h.a)(),o=Object(l.a)(r,3),u=o[1],d=o[2];return Object(c.useEffect)((function(){b.a.get("".concat(i,"user/rememberme"),{withCredentials:!0}).then((function(e){if(""===e.data)throw new Error;a({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:null,isConnected:!0}),u(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){a(K),d(["REMEMBER_ME"])}))}),[]),Object(x.jsx)("div",{className:"h-screen flex justify-center items-center bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-10",children:Object(x.jsx)(m.Provider,{value:{user:s,setUser:a},children:s.isConnected?Object(x.jsx)(G,{}):Object(x.jsx)(v,{})})})};r.a.render(Object(x.jsx)(Q,{}),document.querySelector("#root"))}},[[282,1,2]]]);
//# sourceMappingURL=main.08ef1585.chunk.js.map