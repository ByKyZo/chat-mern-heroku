(this["webpackJsonpchat-group-master"]=this["webpackJsonpchat-group-master"]||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),r=n(112),a=n.n(r),l=(n(127),n(128),n(3)),i="",o=n(7),u=n(10),d=n(11),j=n(8),b=n.n(j),m=s.a.createContext(null),h=n(284),x=n(1),f=function(e){var t=e.isAlreadyMember,n=Object(h.a)(),s=Object(l.a)(n,2)[1],r=Object(c.useContext)(m).setUser,a=Object(c.useState)(!1),j=Object(l.a)(a,2),f=j[0],O=j[1],p=Object(c.useState)({email:"",password:""}),g=Object(l.a)(p,2),v=g[0],N=g[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Login"}),Object(x.jsxs)("form",{className:"w-full",noValidate:!0,onSubmit:function(e){e.preventDefault(),b.a.post("".concat(i,"user/signin"),v).then((function(e){if(""===e.status)throw new Error;O(!1),r({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:null,isConnected:!0}),s(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){O(!0)}))},children:[Object(x.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(x.jsx)("label",{htmlFor:"emailLogin",className:"cursor-pointer",children:Object(x.jsx)(u.a,{className:"text-gray-600 text-2xl m-4",icon:d.b})}),Object(x.jsx)("input",{id:"emailLogin",type:"email",className:"authInput",placeholder:"Email",value:v.email,autoComplete:"on",onChange:function(e){return N(Object(o.a)(Object(o.a)({},v),{},{email:e.target.value}))}})]}),Object(x.jsxs)("div",{className:"authInputWrapper mb-5",children:[Object(x.jsx)("label",{htmlFor:"passwordLogin",className:"cursor-pointer",children:Object(x.jsx)(u.a,{className:"text-gray-600 text-2xl m-4 cursor-pointer",icon:d.c})}),Object(x.jsx)("input",{id:"passwordLogin",type:"password",className:"authInput",placeholder:"Password",value:v.password,onChange:function(e){return N(Object(o.a)(Object(o.a)({},v),{},{password:e.target.value}))}})]}),f&&Object(x.jsx)("p",{className:"text-red-400",children:"Email or password incorrect"}),Object(x.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Connexion"})]}),Object(x.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!1)},children:"Register"})]})},O=n(122),p=n(25),g=function(e){var t=e.isAlreadyMember,n=Object(O.a)({initialValues:{pseudo:"",email:"",password:"",confirmPassword:""},validationSchema:p.a({pseudo:p.c().required("Required"),email:p.c().required("Email address is required").email("Invalid email address"),password:p.c().required("Password is required"),confirmPassword:p.c().required("Please confirm your password").oneOf([p.b("password"),null],"Password must matched")}),onSubmit:function(e){!function(e){b.a.post("".concat(i,"user/signup"),e).then((function(e){console.log(e)})).catch((function(e){console.log("ERROR ---- "+e)}))}({pseudo:e.pseudo,email:e.email,password:e.password})}});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{className:"mb-8 text-4xl text-white uppercase",children:"Sign Up"}),Object(x.jsxs)("form",{onSubmit:n.handleSubmit,className:"w-full",autoComplete:"off",children:[Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"pseudo",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.e,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"pseudo",type:"text",className:"authInput",placeholder:"Full Name"},n.getFieldProps("pseudo")))]}),n.touched.pseudo&&n.errors.pseudo&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.pseudo})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"Email",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.b,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"Email",type:"text",className:"authInput",placeholder:"Email"},n.getFieldProps("email")))]}),n.touched.email&&n.errors.email&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.email})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"Password",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.c,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"Password",type:"password",className:"authInput",placeholder:"Password"},n.getFieldProps("password")))]}),n.touched.password&&n.errors.password&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.password})]}),Object(x.jsxs)("div",{className:"mb-5",children:[Object(x.jsxs)("div",{className:"authInputWrapper",children:[Object(x.jsx)("label",{htmlFor:"ConfirmPassword",className:"cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.c,className:"text-gray-600 text-2xl m-4"})}),Object(x.jsx)("input",Object(o.a)({id:"ConfirmPassword",type:"password",className:"authInput",placeholder:"Confirm password"},n.getFieldProps("confirmPassword")))]}),n.touched.confirmPassword&&n.errors.confirmPassword&&Object(x.jsx)("p",{className:"text-red-400",children:n.errors.confirmPassword})]}),Object(x.jsx)("button",{className:"authBtn w-full bg-blue-700 hover:bg-opacity-80",type:"submit",children:"Sign Up"})]}),Object(x.jsx)("button",{className:"authBtn p-8 bg-green-700 hover:bg-opacity-80",onClick:function(){return t(!0)},children:"Connexion"})]})},v=function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,2),s=n[0],r=n[1];return Object(x.jsx)("div",{className:"p-8 rounded-xl flex flex-col items-center justify-center w-96 shadow-2xl border border-gray-700 bg-gray-800",children:s?Object(x.jsx)(f,{isAlreadyMember:r}):Object(x.jsx)(g,{isAlreadyMember:r})})},N=n(121),w=n(49),y=n(6),C=function(e){var t=e.children,n=e.isOpen,s=e.setIsOpen,r=e.text,a=Object(c.useRef)();return Object(c.useEffect)((function(){var e=n,t=function(t){a.current&&!a.current.contains(t.target)&&e&&s(!1)};return window.addEventListener("mousedown",t),function(){window.removeEventListener("mousedown",t)}}),[n]),Object(x.jsx)("div",{className:"absolute w-full h-full bg-black bg-opacity-50 transition z-50 duration-200 transform ".concat(n?"opacity-100 z-50":"opacity-0 pointer-events-none"," flex items-center justify-center"),children:Object(x.jsxs)("div",{ref:a,className:"text-white bg-black-1100 h-auto w-auto p-6 rounded-xl transition delay-75 duration-200 ease transform ".concat(n?"scale-100 opacity-100":"opacity-0 scale-0"),children:[r&&Object(x.jsx)("p",{className:"w-40 mb-4 text-center m-auto text-lg italic",children:r}),t]})})},E=n(17),I=n.n(E),k=I()(""),F=function(e){var t=e.isOpen,n=e.setIsOpen,s=(e.channels,e.addChannel),r=Object(c.useContext)(m).user,a=Object(c.useState)({userID:r.id,name:"",description:""}),i=Object(l.a)(a,2),u=i[0],d=i[1];return Object(c.useEffect)((function(){k.on("createChannel",(function(e){var t=e.userID,n=e.channel;t===r.id&&s((function(e){return[].concat(Object(y.a)(e),[n])}))}))}),[]),Object(x.jsxs)(C,{isOpen:t,setIsOpen:n,children:[Object(x.jsx)("h4",{className:"text-white font-semibold mb-7",children:"NEW CHANNEL"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{className:"bg-InputCreateChannel rounded-md mb-5 p-2 w-full ctmFocus",type:"text",id:"",value:u.name,onChange:function(e){return d(Object(o.a)(Object(o.a)({},u),{},{name:e.target.value}))}}),Object(x.jsx)("textarea",{className:"bg-InputCreateChannel rounded-md mb-5 p-2  w-full h-24 resize-none ctmFocus leading-4",spellCheck:"false",value:u.description,onChange:function(e){return d(Object(o.a)(Object(o.a)({},u),{},{description:e.target.value}))}}),Object(x.jsx)("button",{className:"bg-blue-600 rounded-md py-1 px-6 text-white ctmFocus hover:bg-blue-700 float-right",onClick:function(){k.emit("createChannel",u)},children:"Save"})]})]})},M=(n(280),I()("")),_=function(e){e.channels;var t=e.setChannels,n=Object(c.useState)(!1),s=Object(l.a)(n,2),r=s[0],a=s[1],o=Object(c.useState)([]),j=Object(l.a)(o,2),h=j[0],f=j[1],O=Object(c.useContext)(m).user,p=Object(c.useRef)(),g=Object(c.useRef)(),v=function(){b.a.get("".concat(i,"channel/search/").concat(O.id)).then((function(e){f(e.data)}))};Object(c.useEffect)((function(){return M.open(),M.on("joinChannel",(function(e){var n=e.joinedUser,c=e.joinedChannel;v(),a(!1),n._id===O.id&&t((function(e){return[].concat(Object(y.a)(e),[c])}))})),function(){return M.close()}}),[]);return Object(c.useEffect)((function(){var e=function(e){!p.current.contains(e.target)&&!g.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"px-4",children:Object(x.jsxs)("div",{className:"p-2 h-14 relative",ref:g,children:[Object(x.jsx)("label",{htmlFor:"search",className:"absolute text-white top-4 left-4 cursor-pointer",children:Object(x.jsx)(u.a,{icon:d.d})}),Object(x.jsx)("input",{id:"search",type:"search",autoComplete:"off",className:"focus:outline-none h-full w-full rounded-md p-1 pl-10 inputSearch leading-10 ctmFocus",placeholder:"Search",onFocus:function(){return a(!0),void v()}})]})}),Object(x.jsx)("div",{className:"relative w-full",children:Object(x.jsx)("div",{className:"absolute w-full px-4 overflow-hidden rounded-lg ".concat(r?"z-50":"z-index--1"),ref:p,children:Object(x.jsx)("ul",{className:"w-full bg-gray-500 rounded-lg transiton duration-200 ease-in-out opacity-0 overflow-hidden ".concat(r&&"opacity-100"),children:function(){var e=[];return h.map((function(t,n){e.push(Object(x.jsx)("li",{className:"w-full flex items-center ".concat(n!==h.length-1&&"border-b"," bg-gray-600 bg-opacity-70 transition duration-200 hover:bg-opacity-100"),children:Object(x.jsxs)("button",{className:"flex p-3 w-full ctmFocus items-center",onClick:function(){return function(e){var t={userID:O.id,channelID:e};M.emit("joinChannel",t)}(t._id)},children:[Object(x.jsx)("div",{className:"h-7 w-7 bg-red-400 rounded-md mr-4 flex items-center justify-center",children:t.name[0]}),Object(x.jsx)("span",{children:t.name})]})},t._id))})),e}()})})})]})},S=function(e){return Object(x.jsxs)("div",{className:"shadow-lg h-16 flex-shrink-0 text-gray-100 font-bold text-lg px-6 flex items-center ".concat(e.className),children:[Object(x.jsx)("span",{children:e.title}),e.children]})},D=(n(281),I()("")),P=function(e){var t=e.currentChannel,n=e.selectChannel,s=Object(c.useState)(!1),r=Object(l.a)(s,2),a=r[0],o=r[1],u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],h=d[1],f=Object(c.useState)([]),O=Object(l.a)(f,2),p=O[0],g=O[1],v=Object(c.useContext)(m).user;Object(c.useEffect)((function(){h(!0),b.a.get("".concat(i,"channel/").concat(v.id)).then((function(e){g(e.data),h(!1)})).finally((function(){h(!1)}))}),[]),Object(c.useEffect)((function(){D.on("banMember",(function(e){var t=e.bannedMember,n=e.channelID;t._id===v.id&&g((function(e){return e.filter((function(e){return e._id!==n}))}))})),D.on("sendMessage",(function(e){if(t._id!==e.channelID){var n={userID:v.id,channelID:e.channelID};D.emit("channelNotification",n)}})),D.on("channelNotification",(function(e){e.userID,e.channelID}))}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(F,{isOpen:a,setIsOpen:o,channels:p,addChannel:g}),Object(x.jsx)(S,{title:"Channel",className:"justify-between",children:Object(x.jsx)("button",{onClick:function(){return o(!0)},className:"channelIcon p-1 rounded-md ctmFocus hoverMenuProfileBg",children:Object(x.jsx)(w.a,{className:"text-white"})})}),Object(x.jsx)(_,{channels:p,setChannels:g}),Object(x.jsx)("div",{className:"p-4 overflow-y-scroll scrollbar h-full",children:j?function(){for(var e=[],t=0;t<7;t++)e.push(Object(x.jsxs)("div",{className:"flex items-center mb-4 cursor-pointer w-full p-2 rounded-lg animate-pulse",children:[Object(x.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-400 mr-3"}),Object(x.jsx)("div",{className:"w-44 h-8 rounded-md bg-gray-400"})]},t));return e}():p.map((function(e,t){return Object(x.jsxs)("button",{onClick:function(){return n(e)},className:"flex items-center ".concat(t!==p.length-1&&"mb-4"," relative cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg"),children:[e.notification.map((function(e,t){return 0!==e.notification&&Object(x.jsx)("div",{className:"absolute h-10 w-10 bg-red-500 rounded-full",children:e.notification},t)})),Object(x.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white uppercase",children:e.name[0]}),Object(x.jsx)("span",{className:"text-gray-300 uppercase",children:e.name})]},e._id)}))})]})},L=function(e){var t=e.children,n=e.isOpen,s=e.setIsOpen,r=e.left,a=e.top,l=e.right,i=e.bottom,o=Object(c.useRef)();return Object(c.useEffect)((function(){var e=n,t=function(t){o.current&&!o.current.contains(t.target)&&e&&s(!1)};return window.addEventListener("mousedown",t),function(){window.removeEventListener("mousedown",t)}}),[n]),Object(x.jsx)("div",{ref:o,style:{left:r||"unset",top:a||"unset",right:l||"unset",bottom:i||"unset"},className:"w-48 bg-black-700 absolute rounded-xl p-3 transition duration-200 opacity-0 transform ".concat(n?"scale-100 opacity-100":"scale-0 opacity-0"),children:Object(x.jsx)("ul",{className:"flex flex-col justify-evenly h-full text-left text-white",children:t})})},R=function(e){var t=e.children,n=e.bg,c=e.txt,s=e.click,r=e.className;return Object(x.jsx)("button",{className:"px-5 py-2 ".concat(n," ").concat(c," ").concat(r," m-2 ctmFocus transition duration-200 hover:bg-opacity-70 rounded"),onClick:s,children:t})},B=n(118),A=n(120),q=n(37),W=n(119),U=n(50),z=I()(""),J=function(e){var t=e.currentChannel,n=e.selectChannel,s=Object(c.useState)(!1),r=Object(l.a)(s,2),a=r[0],o=r[1],u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],h=d[1],f=Object(c.useState)(!1),O=Object(l.a)(f,2),p=O[0],g=O[1],v=Object(c.useState)(!1),N=Object(l.a)(v,2),w=N[0],E=N[1],I=Object(c.useState)([]),k=Object(l.a)(I,2),F=k[0],M=k[1],_=Object(c.useContext)(m).user;return Object(c.useEffect)((function(){z.on("joinChannel",(function(e){var t=e.joinedUser;e.joinedChannel;M((function(e){return[].concat(Object(y.a)(e),[t])}))})),z.on("banMember",(function(e){var n=e.bannedMember,c=e.channelID;n._id===_.id&&c===t._id&&h(!0),c===t._id&&M((function(e){return e.filter((function(e){return e._id!==n._id}))}))})),z.on("deleteChannel",(function(e){t._id===e._id&&n("")})),z.on("leaveChannel",(function(e){var n=e.leaveMember,c=e.channelID;console.log(n),c===t._id&&M((function(e){return e.filter((function(e){return e._id!==n._id}))}))}))}),[]),Object(c.useEffect)((function(){return b.a.get("".concat(i,"channel/user/").concat(t._id)).then((function(e){M(e.data)})),function(){return M([])}}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(C,{isOpen:j,setIsOpen:h,children:[Object(x.jsx)("h3",{children:"Your are banned from this channel"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(R,{click:function(){return n("")},children:"Oh shit"}),Object(x.jsx)(R,{click:function(){return n("")},children:"Nice"})]})]}),Object(x.jsx)(C,{isOpen:a,setIsOpen:o,text:"Are you sure you delete this channel?",children:Object(x.jsxs)("div",{className:"flex items-center justify-around",children:[Object(x.jsx)(R,{click:function(){return o(!1)},children:"Cancel"}),Object(x.jsx)(R,{className:"border border-red-500 hover:bg-red-500 hover:text-white",txt:"text-red-500",click:function(){z.emit("deleteChannel",t._id)},children:"Delete"})]})}),Object(x.jsx)(C,{isOpen:p,setIsOpen:g,text:"Are you sure you leave the channel?",children:Object(x.jsxs)("div",{className:"flex items-center justify-around",children:[Object(x.jsx)(R,{click:function(){return g(!1)},children:"Cancel"}),Object(x.jsx)(R,{className:"border border-red-500 hover:bg-red-500 hover:text-white",txt:"text-red-500",click:function(){return function(){var e={userID:_.id,channelID:t._id};z.emit("leaveChannel",e),n("")}()},children:"Leave"})]})}),Object(x.jsxs)(S,{classNasme:"justify-start flex-shrink-0",children:[Object(x.jsx)("button",{className:"text-2xl ctmFocus mr-3",onClick:function(){return n("")},children:Object(x.jsx)(B.a,{})}),Object(x.jsx)("span",{children:"All channels"})]}),Object(x.jsxs)("div",{className:"px-6 py-4",children:[Object(x.jsxs)("div",{className:"flex justify-between items-center mb-2 relative",children:[Object(x.jsx)("h3",{className:"uppercase text-gray-300 font-bold",children:t.name}),Object(x.jsx)("button",{className:"text-white text-2xl ctmFocus",onClick:function(){return E(!0)},children:Object(x.jsx)(W.a,{})}),Object(x.jsxs)(L,{isOpen:w,setIsOpen:E,top:"25px",right:"0",children:[Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"w-full ctmFocus flex items-center text-gray-200 hoverMenuProfileBg p-2 rounded-lg",onClick:function(){return g(!0)},children:[Object(x.jsx)(A.a,{className:"mr-3"}),"LEAVE"]})}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"w-full ctmFocus flex items-center hoverMenuProfileBg p-2 rounded-lg text-gray-200",onClick:function(){console.log("edit")},children:[Object(x.jsx)(q.b,{className:"mr-3"}),"EDIT"]})}),(_.id===t.owner||"admin"===_.role)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:"border-b border-gray-500 m-2"}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"w-full ctmFocus flex items-center hoverMenuProfileBg p-2 rounded-lg text-red-500",onClick:function(){return o(!0)},children:[Object(x.jsx)(q.a,{className:"mr-3"}),"DELETE"]})})]})]})]}),Object(x.jsx)("p",{className:"text-gray-300",children:t.description?t.description:"no description"})]}),Object(x.jsx)("h3",{className:"uppercase text-gray-300 font-bold px-6 py-4",children:"Members"}),Object(x.jsx)("ul",{className:"overflow-y-scroll scrollbar h-full px-4",children:F.map((function(e,n){return Object(x.jsxs)("li",{className:"mb-4 flex justify-between",children:[Object(x.jsxs)("div",{className:"flex items-center p-2",children:[Object(x.jsx)("img",{className:"w-9 h-9 bg-white mr-5 rounded",src:e.picture,alt:"C"}),Object(x.jsx)("span",{className:"text-lg ".concat(_.id===e._id?"text-gray-300":"text-gray-400"," font-bold"),children:e.pseudo}),e._id===t.owner&&Object(x.jsx)(q.d,{className:"ml-2 text-yellow-500"})]}),Object(x.jsxs)("div",{className:"flex items-center text-white",children:[Object(x.jsx)("button",{className:"ctmFocus p-1",children:Object(x.jsx)(q.c,{})}),(_.id===t.owner||"admin"===_.role)&&e._id!==_.id&&Object(x.jsx)("button",{className:"ml-4 ctmFocus p-1",onClick:function(){return function(e){var n={bannedMemberID:e,channelID:t._id};z.emit("banMember",n)}(e._id)},children:Object(x.jsx)(U.a,{})})]})]},n)}))})]})},T=function(e){var t=e.selectChannel,n=e.currentChannel;return Object(x.jsx)(x.Fragment,{children:n?Object(x.jsx)(J,{currentChannel:n,selectChannel:t}):Object(x.jsx)(P,{currentChannel:n,selectChannel:t})})},V=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"border-b-2 h-16 border-gray-900 text-gray-100 font-bold text-lg px-6 flex items-center justify-between",children:Object(x.jsx)("h1",{className:"text-center text-white",children:"Message"})}),Object(x.jsx)("div",{className:"p-4",children:Object(x.jsxs)("button",{className:"flex items-center mb-4 cursor-pointer w-full ctmFocus hoverMenuProfileBg p-2 rounded-lg",children:[Object(x.jsx)("div",{className:"w-8 h-8 channelIcon mr-3 rounded-md flex items-center justify-center text-white"}),Object(x.jsx)("span",{className:"text-gray-300",children:"Message"})]})})]})},H=function(e){var t=e.currentMode,n=e.setMode,s=e.selectChannel,r=e.currentChannel,a=Object(c.useContext)(m).user,i=Object(c.useState)(!1),o=Object(l.a)(i,2),j=o[0],b=o[1],f=Object(h.a)(),O=Object(l.a)(f,3)[2];return Object(x.jsxs)("div",{className:"w-72 bg-black-900 flex flex-col justify-between flex-shrink-0",children:[Object(x.jsx)(x.Fragment,{children:"channel"===t?Object(x.jsx)(T,{currentChannel:r,selectChannel:s}):Object(x.jsx)(V,{})}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"h-14 bg-gray-700 flex",children:[Object(x.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("channel")},children:"CHANNEL"}),Object(x.jsx)("button",{className:"px-6 w-full text-gray-300 ctmFocus hover:bg-gray-800",onClick:function(){return n("message")},children:"MESSAGE"})]}),Object(x.jsxs)("a",{href:"#",className:"h-20 bg-black-1100 p-6 flex items-center justify-between w-full ctmFocus ring-inset relative",onClick:function(e){e.preventDefault(),b(!0)},children:[Object(x.jsxs)(L,{isOpen:j,setIsOpen:b,top:"-144px",right:"16px",children:[Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(x.jsx)(u.a,{className:"text-xl mr-3",icon:d.f}),"My Profile"]})}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",children:[Object(x.jsx)(N.a,{className:"text-xl mr-3"}),"Tweeter"]})}),Object(x.jsx)("li",{className:"h-1 border-b border-gray-100 my-2 opacity-30"}),Object(x.jsx)("li",{children:Object(x.jsxs)("button",{className:"flex w-full text-red-500 transition duration-200 hoverMenuProfileBg rounded-lg p-2 items-center ctmFocus",onClick:function(){O(["REMEMBER_ME"]),window.location.reload()},children:[Object(x.jsx)(w.b,{className:"text-xl mr-3"}),"Logout"]})})]}),Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)("img",{className:"h-10 w-10 mr-5",src:a.image,alt:"profile"}),Object(x.jsx)("span",{className:"text-gray-300 text-xl",children:a.pseudo})]}),Object(x.jsx)(u.a,{className:"text-gray-300",icon:d.a})]})]})]})},G=(n(282),function(e){var t=e.user,n=e.message,c=e.date,s=e.hour;return Object(x.jsxs)("li",{className:"flex mb-4 w-full",children:[Object(x.jsx)("img",{className:"h-10 w-10 bg-white rounded-md mr-5 mt-1 flex-none",src:t.picture,alt:"C"}),Object(x.jsxs)("div",{className:"w-full",children:[Object(x.jsxs)("div",{className:"flex items-baseline",children:[Object(x.jsx)("h2",{className:"mr-3 font-bold text-lg colorName",children:t.pseudo}),Object(x.jsx)("span",{className:"text-gray-300 text-xs colorName",children:function(){for(var e=c.split("/"),t=(new Date).toLocaleDateString().split("/"),n=0;n<=2;n++)e[n]=parseInt(e[n]),t[n]=parseInt(t[n]);if(e[1]===t[1]&&e[2]===t[2]){if(e[0]===t[0])return"today at ";if(e[0]===t[0]-1)return"yesterday at "}return c}()+" "+s})]}),Object(x.jsx)("div",{className:"text-gray-300 w-full",children:n})]})]})}),K=function(e){var t=e.date,n=function(){var e=("0"===t.slice(3,5)[0])-1?t.slice(3,5)-1:t.slice(4,5)-1;return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e]," ").concat(t.slice(0,2),", ").concat(t.slice(6,10))};return n(),Object(x.jsxs)("li",{className:"flex justify-between items-center mb-4",children:[Object(x.jsx)("div",{className:"border-b border-gray-500 w-full"}),Object(x.jsx)("span",{className:"inline-block flex-shrink-0 text-center break-normal mx-4 text-gray-500 text-xs",children:n()}),Object(x.jsx)("div",{className:"border-b border-gray-500 bg-gray-500 w-full"})]})},Y=I()(""),Q=function(e){var t=e.currentChannel,n=Object(c.useContext)(m).user,s=Object(c.useState)([]),r=Object(l.a)(s,2),a=r[0],u=r[1],d=Object(c.useRef)();Object(c.useEffect)((function(){Y.on("sendMessage",(function(e){-1===a.findIndex((function(t){return t._id!==e._id}))&&u((function(t){return[].concat(Object(y.a)(t),[e])}))}))}),[]),Object(c.useEffect)((function(){b.a.get("".concat(i,"channel/message/").concat(t._id)).then((function(e){u(e.data)}))}),[]);var j=function(){var e=d.current.innerText;if(e){var c={userID:n.id,channelID:t._id,message:e};d.current.innerText="",Y.emit("sendMessage",c)}};return Object(x.jsxs)("div",{className:"flex flex-col h-full w-full justify-between",children:[Object(x.jsx)("div",{className:"h-16 shadow-lg text-gray-100 font-bold text-lg px-11 flex items-center uppercase flex-shrink-0",children:Object(x.jsx)("h1",{children:t.name?t.name:"Select channel"})}),t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"overflow-y-scroll h-full scrollbar flex flex-col-reverse",children:Object(x.jsx)("ul",{className:"px-11 pt-6 break-all mt-auto",children:function(){var e=[],n=a.filter((function(e){return e.channelID===t._id})).map((function(e){return e.date.slice(0,2)})),c=a.filter((function(e){return e.channelID===t._id})).map((function(e){return e.date.slice(3,5)})),s=a.filter((function(e){return e.channelID===t._id})).map((function(e){return e.date.slice(6,10)})),r=n[0],l=c[0],i=s[0];return a.filter((function(e){return e.channelID===t._id})).forEach((function(t,a){var u=t.date.slice(0,2),d=t.date.slice(3,5),j=t.date.slice(6,10);u===r&&d===l&&j===i||(e.push(Object(x.jsx)(K,{date:t.date},a)),r=n[a],l=c[a],i=s[a]),e.push(Object(x.jsx)(G,Object(o.a)({},t),t._id))})),e}()})}),Object(x.jsxs)("div",{className:"min-h-10 max-w-full mx-11 flex relative rounded-md overflow-hidden my-7 flex-shrink-0",children:[Object(x.jsx)("div",{contentEditable:"true",ref:d,onKeyDown:function(e){return function(e){13===e.keyCode&&(e.preventDefault(),j())}(e)},className:"h-full w-full inputSearch ctmFocus p-2 pr-10 break-all text-gray-300"}),Object(x.jsx)("button",{onClick:function(){j()},className:"absolute right-1 inset-y-1 ctmFocus m-auto bg-blue-500  text-white h-8 w-8 flex items-center justify-center rounded-md cursor-pointer",children:Object(x.jsx)(U.b,{})})]})]}):Object(x.jsxs)("div",{className:"flex items-center justify-center flex-col h-full",children:[Object(x.jsx)("h3",{className:"text-4xl",children:"Welcome !"}),Object(x.jsx)("p",{children:"Please select channel"})]})]})},X=function(e){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Message"})})},Z=function(e){var t=Object(c.useState)("channel"),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),i=Object(l.a)(a,2),o=i[0],u=i[1];return Object(x.jsxs)("div",{className:"w-full h-full bg-black-700 rounded-lg shadow-2xl flex overflow-hidden relative",children:[Object(x.jsx)(H,{currentMode:s,setMode:r,currentChannel:o,selectChannel:u}),function(){switch(s){case"channel":return Object(x.jsx)(Q,{currentChannel:o});case"message":return Object(x.jsx)(X,{});default:return Object(x.jsx)(Q,{currentChannel:o})}}()]})},$={id:null,pseudo:null,email:null,description:null,picture:null,role:null,isConnected:!1},ee=function(e){var t=Object(c.useState)($),n=Object(l.a)(t,2),s=n[0],r=n[1],a=Object(h.a)(),o=Object(l.a)(a,3),u=o[1],d=o[2];return Object(c.useEffect)((function(){b.a.get("".concat(i,"user/rememberme"),{withCredentials:!0}).then((function(e){if(""===e.data)throw new Error;r({id:e.data._id,pseudo:e.data.pseudo,email:e.data.email,description:e.data.description,picture:e.data.picture,role:e.data.role,isConnected:!0}),u(["REMEMBER_ME"],e.data.remember_me_token)})).catch((function(e){r($),d(["REMEMBER_ME"])}))}),[]),Object(x.jsx)("div",{className:"h-screen flex justify-center items-center bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-10",children:Object(x.jsx)(m.Provider,{value:{user:s,setUser:r},children:s.isConnected?Object(x.jsx)(Z,{}):Object(x.jsx)(v,{})})})};a.a.render(Object(x.jsx)(ee,{}),document.querySelector("#root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.642129a3.chunk.js.map